import streamlit as st

st.set_page_config(page_title="ã‚ãªãŸã¯ã©ã‚“ãªãƒ’ãƒ¼ãƒ­ãƒ¼ï¼Ÿ", layout="centered")

st.title("ğŸ¦¸ ã‚ãªãŸã¯ã©ã‚“ãªãƒ’ãƒ¼ãƒ­ãƒ¼ï¼Ÿè¨ºæ–­")
st.caption("ç›´æ„Ÿã§é¸ã‚“ã§ã­ã€‚æ·±ãè€ƒãˆãªã„ã®ãŒã‚³ãƒ„ï¼")


# -----------------------------
# ã‚¿ã‚¤ãƒ—å®šç¾©
# -----------------------------
types = {
    "ç†±è¡€": 0,
    "ã‚¯ãƒ¼ãƒ«": 0,
    "ä¿ºæ§˜": 0,
    "å‹‡æ°—å‹": 0,
    "ãƒ€ãƒ¼ã‚¯": 0
}


def add_score(key):
    st.session_state[key] += 1


if "scores" not in st.session_state:
    st.session_state.update(types)


# -----------------------------
# è³ªå•
# -----------------------------
questions = [
    ("ãƒ”ãƒ³ãƒã®æ™‚ã©ã†ã™ã‚‹ï¼Ÿ",
     ["ã¨ã«ã‹ãçªæ’ƒï¼", "å†·é™ã«åˆ†æ", "ä¿ºãŒã‚„ã‚‹ï¼", "æ€–ã„ã‘ã©é ‘å¼µã‚‹", "å½±ã‹ã‚‰å‡¦ç†"]),

    ("æˆ¦ã„æ–¹ã¯ï¼Ÿ",
     ["ãƒ‘ãƒ¯ãƒ¼å‹è² ", "é ­è„³æˆ¦", "ã‚«ãƒªã‚¹ãƒæŒ‡æ®", "ä»²é–“ã«åŠ©ã‘ã‚‰ã‚Œã‚‹", "ãƒ€ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¤ãƒˆ"]),

    ("ãƒãƒ¼ãƒ ã§ã¯ï¼Ÿ",
     ["ãƒ ãƒ¼ãƒ‰ãƒ¡ãƒ¼ã‚«ãƒ¼", "å‚è¬€å½¹", "ãƒªãƒ¼ãƒ€ãƒ¼", "ã‚µãƒãƒ¼ãƒˆä¿‚", "å˜ç‹¬è¡Œå‹•"]),

    ("æ­£ç¾©ã¨ã¯ï¼Ÿ",
     ["å®ˆã‚‹ã‚‚ã®ãŒã‚ã‚‹ï¼", "åˆç†çš„è§£æ±º", "ä¿ºãŒæ­£ç¾©ã ", "ã¿ã‚“ãªå¹¸ã›ã«", "æ‚ªã‚’è£ã"]),

    ("å¥½ããªè‰²ã¯ï¼Ÿ",
     ["èµ¤", "é’", "é‡‘", "ç·‘", "é»’"])
]


mapping = [
    ["ç†±è¡€", "ã‚¯ãƒ¼ãƒ«", "ä¿ºæ§˜", "å‹‡æ°—å‹", "ãƒ€ãƒ¼ã‚¯"],
    ["ç†±è¡€", "ã‚¯ãƒ¼ãƒ«", "ä¿ºæ§˜", "å‹‡æ°—å‹", "ãƒ€ãƒ¼ã‚¯"],
    ["ç†±è¡€", "ã‚¯ãƒ¼ãƒ«", "ä¿ºæ§˜", "å‹‡æ°—å‹", "ãƒ€ãƒ¼ã‚¯"],
    ["ç†±è¡€", "ã‚¯ãƒ¼ãƒ«", "ä¿ºæ§˜", "å‹‡æ°—å‹", "ãƒ€ãƒ¼ã‚¯"],
    ["ç†±è¡€", "ã‚¯ãƒ¼ãƒ«", "ä¿ºæ§˜", "å‹‡æ°—å‹", "ãƒ€ãƒ¼ã‚¯"]
]


answers = []

st.divider()

for i, (q, choices) in enumerate(questions):
    ans = st.radio(q, choices, key=f"q{i}")
    answers.append(ans)


# -----------------------------
# è¨ºæ–­
# -----------------------------
if st.button("âœ¨ è¨ºæ–­ã™ã‚‹ï¼", use_container_width=True):

    # ãƒªã‚»ãƒƒãƒˆ
    for k in st.session_state:
        if k in types:
            st.session_state[k] = 0

    # åŠ ç®—
    for i, ans in enumerate(answers):
        idx = questions[i][1].index(ans)
        hero_type = mapping[i][idx]
        st.session_state[hero_type] += 1

    result = max(types.keys(), key=lambda k: st.session_state[k])

    st.divider()
    st.header("ğŸŒŸ è¨ºæ–­çµæœ")

    results_text = {
        "ç†±è¡€": "ğŸ”¥ ç‹é“ç†±è¡€ãƒ’ãƒ¼ãƒ­ãƒ¼ï¼èª°ã‚ˆã‚Šã‚‚çœŸã£ç›´ãã§ä»²é–“æƒ³ã„ï¼",
        "ã‚¯ãƒ¼ãƒ«": "ğŸ§  ã‚¯ãƒ¼ãƒ«é ­è„³ãƒ’ãƒ¼ãƒ­ãƒ¼ï¼å†·é™æ²ˆç€ãªæˆ¦ç•¥å®¶ï¼",
        "ä¿ºæ§˜": "ğŸ‘‘ ä¿ºæ§˜ç³»ãƒ’ãƒ¼ãƒ­ãƒ¼ï¼ã‚«ãƒªã‚¹ãƒæ€§MAXï¼",
        "å‹‡æ°—å‹": "ğŸ¥º å‹‡æ°—æŒ¯ã‚Šçµã‚‹ãƒ’ãƒ¼ãƒ­ãƒ¼ï¼æˆé•·å‹ä¸»äººå…¬ã‚¿ã‚¤ãƒ—ï¼",
        "ãƒ€ãƒ¼ã‚¯": "ğŸ˜ˆ ãƒ€ãƒ¼ã‚¯ãƒ’ãƒ¼ãƒ­ãƒ¼ï¼å½±ã‹ã‚‰ä¸–ç•Œã‚’æ•‘ã†å­¤é«˜ã®æˆ¦å£«ï¼"
    }

    st.success(results_text[result])
    st.balloons()

st.divider()
st.caption("ğŸŒ™ ä»Šæ—¥ã®ã‚ãªãŸã®ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚¿ã‚¤ãƒ—ã ã‚ˆ")
